<!DOCTYPE html>
<html lang="en-US">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>The PoC Drag Art Collective</title>
  <link href="https://fonts.googleapis.com/css?family=Rajdhani:400,700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,400i,700,700i&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://d1azc1qln24ryf.cloudfront.net/114779/Socicon/style-cf.css?u8vidh">
  <link rel="stylesheet" href="./styles/styles.css" media="all">
  <link rel="stylesheet" href="./styles/material-icons.css" media="all">
  <link rel="stylesheet" href="./styles/qt-main-min.css" media="all">
  <link rel="stylesheet" href="./styles/qt-desktop-min.css" media="only screen and (min-width: 1201px)">

  <link rel="icon" href="favicon-32x32.png"
    sizes="32x32">
  <link rel="icon" href="favicon-192x192.png"
    sizes="192x192">
  <link rel="apple-touch-icon-precomposed" href="favicon-180x180.png">
  <meta name="msapplication-TileImage" content="favicon-270x270.png">
</head>

<body>
  <div id="qtMasterContainter" class="qt-parentcontainer" style="perspective: none; height: auto; overflow-x: auto;">
    <nav class="qt-menubar qt-menubar-center nav-wrapper hide-on-xl-and-down">
      <div class="qt-content-primary-dark qt-menubg-color">
      </div>
      <div class="qt-container-l">
        <ul class="qt-menu-secondary">
          <a href="index.html" class="qt-logo-link qt-fontsize-h3">
            <img src="./images/logo-mini.png" alt="Home">
          </a>
        </ul>
      </div>
      <ul class="qt-desktopmenu">
        <li class="qt-menuitem">
          <a href="#" aria-current="page">Home</a>
        </li>
        <li class=" menu-item-487 qt-menuitem">
          <a href="#events">Events</a>
        </li>
        <!--
        <li class="qt-menuitem">
          <a href="#gallery">Gallery</a>
        </li>
        -->
      </ul>
    </nav>
    <div id="maincontent">
      <div class="qt-main">
        <div id="qtPageBg">
          <div class="qt-pagebg-in qt-bgloaded" data-bgimage="./images/background-intro-retro-mini.jpg"
            style="background-image: url('./images/background-intro-retro-mini.jpg');"></div>
          <div class="qt-darken-bg-80"></div>
        </div>
        <div class="qt-main-contents 2 page type-page hentry">
          <div class="qt-vc-row-container" style="width: 100%; max-width: 1170px; margin: 0 auto; padding: 0 0.75rem;">
            <div id="events">
              <div class="col s12">
                <h2 class="qt-center">
                  <span class="qt-txtfx qt-txtfx--newyork qt-txtfxstart">Events
                    <span data-letters="Events"></span>
                    <span data-letters="Events"></span>
                  </span>
                </h2>
                <hr class="qt-spacer-s">
                                 <script>
    
var clientId = '521564678234-n0sije2avk4bhb4qgllhqf86e1nlrl3h.apps.googleusercontent.com'; //choose web app client Id, redirect URI and Javascript origin set to http://localhost
var apiKey = 'AIzaSyCbkhWejWpMVXD1floGqph9juJ2dSQpWSE'; //choose public apiKey, any IP allowed (leave blank the allowed IP boxes in Google Dev Console)
var userEmail = "pocdac@flash-spark-266600.iam.gserviceaccount.com"; //your calendar Id
var userTimeZone = "New_York"; //example "Rome" "Los_Angeles" ecc...
var maxRows = 100; //events to shown
var calName = "POCDAC Events"; //name of calendar (write what you want, doesn't matter)
    
var scopes = 'https://www.googleapis.com/auth/calendar.readonly';
    
//--------------------- Add a 0 to numbers
function padNum(num) {
    if (num <= 9) {
        return "0" + num;
    }
    return num;
}
//--------------------- end    
    
//--------------------- From 24h to Am/Pm
function AmPm(num) {
    if (num <= 12) { return "am " + num; }
    return "pm " + padNum(num - 12);
}
//--------------------- end    

//--------------------- num Month to String
function monthString(num) {
         if (num === "01") { return "JAN"; } 
    else if (num === "02") { return "FEB"; } 
    else if (num === "03") { return "MAR"; } 
    else if (num === "04") { return "APR"; } 
    else if (num === "05") { return "MAJ"; } 
    else if (num === "06") { return "JUN"; } 
    else if (num === "07") { return "JUL"; } 
    else if (num === "08") { return "AUG"; } 
    else if (num === "09") { return "SEP"; } 
    else if (num === "10") { return "OCT"; } 
    else if (num === "11") { return "NOV"; } 
    else if (num === "12") { return "DEC"; }
}
//--------------------- end

//--------------------- from num to day of week
function dayString(num){
         if (num == "1") { return "mon" }
    else if (num == "2") { return "tue" }
    else if (num == "3") { return "wed" }
    else if (num == "4") { return "thu" }
    else if (num == "5") { return "fri" }
    else if (num == "6") { return "sat" }
    else if (num == "0") { return "sun" }
}
//--------------------- end

//--------------------- client CALL
function handleClientLoad() {
    gapi.client.setApiKey(apiKey);
    checkAuth();
}
//--------------------- end

//--------------------- check Auth
function checkAuth() {
    gapi.auth.authorize({client_id: clientId, scope: scopes, immediate: true}, handleAuthResult);
}
//--------------------- end

//--------------------- handle result and make CALL
function handleAuthResult(authResult) {
    if (authResult) {
        makeApiCall();
    }
}
//--------------------- end

//--------------------- API CALL itself
function makeApiCall() {
    var today = new Date(); //today date
    gapi.client.load('calendar', 'v3', function () {
        var request = gapi.client.calendar.events.list({
            'calendarId' : userEmail,
            'timeZone' : userTimeZone, 
            'singleEvents': true, 
            'timeMin': today.toISOString(), //gathers only events not happened yet
            'maxResults': maxRows, 
            'orderBy': 'startTime'});
    request.execute(function (resp) {
            for (var i = 0; i < resp.items.length; i++) {
                var li = document.createElement('li');
                var item = resp.items[i];
                var classes = [];
                var allDay = item.start.date? true : false;
                var startDT = allDay ? item.start.date : item.start.dateTime;
                var dateTime = startDT.split("T"); //split date from time
                var date = dateTime[0].split("-"); //split yyyy mm dd
                var startYear = date[0];
                var startMonth = monthString(date[1]);
                var startDay = date[2];
                var startDateISO = new Date(startMonth + " " + startDay + ", " + startYear + " 00:00:00");
                var startDayWeek = dayString(startDateISO.getDay());
                if( allDay == true){ //change this to match your needs
                    var str = [
                    '<font size="4" face="courier">',
                    startDayWeek, ' ',
                    startMonth, ' ',
                    startDay, ' ',
                    startYear, '</font><font size="5" face="courier"> @ ', item.summary , '</font><br><br>'
                    ];
                }
                else{
                    var time = dateTime[1].split(":"); //split hh ss etc...
                    var startHour = AmPm(time[0]);
                    var startMin = time[1];
                    var str = [ //change this to match your needs
                        '<font size="4" face="courier">',
                        startDayWeek, ' ',
                        startMonth, ' ',
                        startDay, ' ',
                        startYear, ' - ',
                        startHour, ':', startMin, '</font><font size="5" face="courier"> @ ', item.summary , '</font><br><br>'
                        ];
                }
                li.innerHTML = str.join('');
                li.setAttribute('class', classes.join(' '));
                document.getElementById('events').appendChild(li);
            }
        document.getElementById('updated').innerHTML = "updated " + today;
        document.getElementById('calendar').innerHTML = calName;
        });
    });
}
//--------------------- end
</script>
<script src='https://apis.google.com/js/client.js?onload=handleClientLoad'></script>
    <div id='content'>
    <h1 id='calendar' style="color:grey">LOADING . . . .</h1>
    <ul id='events'></ul>
    </div>
    <p id='updated' style="font-size:12; color:grey">updating . . . . .</p>

    </br>
    <div class="qt-footercontainer qt-content-primary-light" style="background-image: url('./images/background-2.jpg');">
      <div class="qt-footer-bottom qt-content-primary qt-content-aside qt-negative">
        <div class="qt-container-l">
          <div class="row">
            <div class="col s12 m12 l6">
              <ul class="qt-menu-social">
                <!--
                <li class="qt-social-linkicon">
                  <a href="http://spotify.com/" target="_blank">
                    <i class="socicon-spotify"></i>
                  </a>
                </li>
                -->
                <li class="qt-social-linkicon">
                  <a href="https://instagram.com/thepoccollective" target="_blank">
                    <i class="socicon-instagram"></i>
                  </a>
                </li>
                <!--
                <li class="qt-social-linkicon">
                  <a href="https://facebook.com/events/1010230499330986/?ti=icl" target="_blank">
                    <i class="socicon-facebook"></i>
                  </a>
                </li>
                -->
              </ul>
            </div>
            <div class="col s12 m12 l6">
              <h5 class="qt-copyright-text">Designed with love by <a href="https://eclectusinteractive.com" target="_blank">Eclectus Interactive</a></h5>
              <!--
              <ul class="qt-menu-footer qt-small">
                <li class="current-page_item page-item-2 current_page_item menu-item-1236">
                  <a href="#">Homepage</a>
                </li>
                <li>
                  <a href="#">News</a>
                </li>
                <li>
                  <a href="#">Disclaimer</a>
                </li>
              </ul>
              -->
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</body>

</html>